<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>河南文旅视频 - 数字文旅体验</title>
    <link href="css/video.css" rel="stylesheet" type="text/css">
    <!-- 提前加载基础样式，避免闪屏 -->
    <style type="text/css">
        /* 基础隐藏样式，避免JS加载前元素闪烁 */
        #backToTop { display: none !important; }
        .login-modal { display: none !important; }
    </style>
</head>
<body>
    <!-- 头部导航（统一风格 + 语义化） -->
    <div class="hand">
        <div class="title">
            <div class="hand-title">
                <img src="images/logo.png" alt="河南旅游logo" class="logo" width="50" height="50">
                <p><i class="title_i">逐鹿中原</i>&nbsp; -- &nbsp;河南行</p>
            </div>
            <div class="but">
                <a href="javascript:void(0);" class="login-btn" id="loginBtn">登录</a>
                <a href="zhuce.html" class="zhuce-btn">注册</a>
            </div>
        </div>

        <!-- 导航栏（统一类名，适配全局样式） -->
        <div class="nav-wrap">
            <ul class="nav-list">
                <li><a href="index.html">首页</a></li>
                <li><a href="h1.html">文旅资源</a></li>
                <li><a href="h2.html">非遗文化</a></li>
                <li><a href="h3.html">特色民俗</a></li>
                <li><a href="h4.html">数字文旅体验</a></li>
                <li><a href="video.html" class="active">视频欣赏</a></li>
            </ul>
        </div>
    </div>

    <!-- 视频内容区域（结构优化 + 响应式） -->
    <div class="video-container">
        <h2 class="video-title">河南文旅风光片</h2>
        
        <!-- 本地视频（优化属性 + 加载提示） -->
        <div class="main-video-wrapper">
            <video controls 
                   poster="images/video/video_cover.jpg" 
                   width="100%" 
                   class="main-video"
                   preload="metadata">
                <source src="media/henan_tour.mp4" type="video/mp4">
                <div class="video-fallback">
                    您的浏览器不支持HTML5视频播放，请升级至最新版浏览器！<br>
                    <a href="media/henan_tour.mp4" download="河南文旅风光片.mp4">点击下载视频</a>
                </div>
            </video>
        </div>
        
        <!-- 视频简介（语义化 + 样式优化） -->
        <div class="video-desc">
            <h3 class="desc-title">视频简介</h3>
            <p class="desc-content">
                本片展示了河南的自然景观、历史古迹、非遗文化与数字文旅体验项目，涵盖少林寺、龙门石窟、清明上河园等核心文旅资源，以及360°虚拟漫游、数字藏品等新兴体验形式，体现了河南"传统与现代融合"的文旅发展理念。
            </p>
        </div>
        
        <!-- 视频列表（Grid布局 + 交互增强） -->
        <div class="video-list">
            <h3 class="list-title">更多相关视频</h3>
            <div class="video-items">
                <div class="video-item" data-video="media/video1.mp4" data-cover="images/video/video1_thumb.jpg" data-title="少林寺功夫表演">
                    <img src="images/video/video1_thumb.jpg" alt="少林寺功夫表演" class="video-thumb">
                    <p class="video-item-title">少林寺功夫表演</p>
                </div>
                <div class="video-item" data-video="media/video2.mp4" data-cover="images/video/video2_thumb.jpg" data-title="龙门石窟讲解">
                    <img src="images/video/video2_thumb.jpg" alt="龙门石窟讲解" class="video-thumb">
                    <p class="video-item-title">龙门石窟讲解</p>
                </div>
                <div class="video-item" data-video="media/video3.mp4" data-cover="images/video/video3_thumb.jpg" data-title="清明上河园夜景">
                    <img src="images/video/video3_thumb.jpg" alt="清明上河园夜景" class="video-thumb">
                    <p class="video-item-title">清明上河园夜景</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 底部容器 -->
    <div id="footer-container"></div>

    <!-- 回到顶部按钮（优化样式 + 兼容） -->
    <button id="backToTop" class="back-to-top">↑</button>

    <!-- 登录弹窗（提前创建DOM，避免JS动态创建延迟） -->
    <div class="login-modal" id="loginModal">
        <div class="modal-content">
            <div class="form-item">
                <label for="phone">手机号</label>
                <input type="tel" id="phone" placeholder="请输入手机号">
            </div>
            <div class="form-item">
                <label for="password">密码</label>
                <input type="password" id="password" placeholder="请输入密码">
            </div>
            <button class="btn" id="modalLoginBtn">登录</button>
        </div>
    </div>

    <!-- 脚本加载区（统一放到底部，提升性能） -->
    <script src="js/load-html.js" type="text/javascript"></script>
    <script type="text/javascript">
        // 1. 加载底部（兼容ES5 + 容错）
        window.onload = function() {
            // 加载底部
            if (typeof loadFooter === 'function') {
                loadFooter('footer-container');
            } else {
                alert('加载底部失败：未找到loadFooter函数！');
            }

            // 2. 回到顶部功能（兼容ES5 + 平滑滚动降级）
            var backToTopBtn = document.getElementById('backToTop');
            // 滚动监听
            window.onscroll = function() {
                if (window.pageYOffset > 300) {
                    backToTopBtn.style.display = 'block';
                } else {
                    backToTopBtn.style.display = 'none';
                }
            };
            // 点击回到顶部（兼容旧浏览器）
            backToTopBtn.onclick = function() {
                // 检测是否支持平滑滚动
                if ('scrollBehavior' in document.documentElement.style) {
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                } else {
                    // 降级：快速滚动
                    var scrollTop = window.pageYOffset;
                    var timer = setInterval(function() {
                        scrollTop -= 50;
                        if (scrollTop <= 0) {
                            scrollTop = 0;
                            clearInterval(timer);
                        }
                        window.scrollTo(0, scrollTop);
                    }, 10);
                }
            };

            // 3. 登录弹窗交互（兼容ES5）
            var loginBtn = document.getElementById('loginBtn');
            var loginModal = document.getElementById('loginModal');
            var modalLoginBtn = document.getElementById('modalLoginBtn');
            var phoneInput = document.getElementById('phone');
            var passwordInput = document.getElementById('password');

            // 打开弹窗
            loginBtn.onclick = function() {
                loginModal.style.display = 'flex';
                phoneInput.focus(); // 自动聚焦
            };

            // 登录验证
            modalLoginBtn.onclick = function() {
                var phone = phoneInput.value.trim();
                var password = passwordInput.value.trim();
                var phoneReg = /^1[3-9]\d{9}$/;

                if (!phone) {
                    alert('请输入手机号！');
                    phoneInput.focus();
                    return;
                }
                if (!phoneReg.test(phone)) {
                    alert('请输入正确的11位手机号！');
                    phoneInput.focus();
                    return;
                }
                if (!password) {
                    alert('请输入密码！');
                    passwordInput.focus();
                    return;
                }

                loginModal.style.display = 'none';
                alert('登录成功！');
                // 清空输入框
                phoneInput.value = '';
                passwordInput.value = '';
            };

            // 点击外部关闭弹窗
            loginModal.onclick = function(e) {
                if (e.target === loginModal) {
                    loginModal.style.display = 'none';
                }
            };

            // ESC键关闭弹窗
            document.onkeydown = function(e) {
                e = e || window.event;
                if (e.keyCode === 27 && loginModal.style.display === 'flex') {
                    loginModal.style.display = 'none';
                }
            };

            // 4. 视频列表点击切换（增强交互）
            var videoItems = document.getElementsByClassName('video-item');
            var mainVideo = document.getElementsByClassName('main-video')[0];
            var videoTitle = document.getElementsByClassName('video-title')[0];

            for (var i = 0; i < videoItems.length; i++) {
                videoItems[i].onclick = function() {
                    // 获取自定义属性
                    var videoSrc = this.getAttribute('data-video');
                    var videoCover = this.getAttribute('data-cover');
                    var videoName = this.getAttribute('data-title');
                    
                    // 更新主视频
                    mainVideo.src = videoSrc;
                    mainVideo.poster = videoCover;
                    videoTitle.textContent = videoName;
                    // 自动播放
                    mainVideo.play();
                    
                    // 高亮选中项
                    for (var j = 0; j < videoItems.length; j++) {
                        videoItems[j].classList.remove('active');
                    }
                    this.classList.add('active');
                };
            }
        };
    </script>
</body>
</html>